Ext.define('ldg.view.Map', {
    extend: 'Ext.Map',
    xtype: 'map',

    config: {
        title: 'Mapa',
        iconCls: 'locate',
        useCurrentLocation: false,
        mapOptions: {
            center: new google.maps.LatLng(41.394638, 2.148994),
            MapTypeId: google.maps.MapTypeId.ROADMAP,
            zoom: 16,
        },
        listeners: [
            {
                fn: 'onMapRender',
                event: 'maprender'
            }
        ]
    },

    onMapRender: function (map, gmap, options) {
        //console.log('map rendered');

        var image = new google.maps.MarkerImage(
          '/resources/images/ldg-map-icon.png',
          new google.maps.Size(60,137),
          new google.maps.Point(0,0),
          new google.maps.Point(30,137)
        );

        var shadow = new google.maps.MarkerImage(
          'resources/images/ldg-map-icon-shadow.png',
          new google.maps.Size(132,137),
          new google.maps.Point(0,0),
          new google.maps.Point(30,137)
        );

        var shape = {
          coord: [33,0,35,1,42,2,55,3,56,4,57,5,56,6,56,7,55,8,52,9,51,10,52,11,52,12,53,13,53,14,52,15,52,16,53,17,54,18,55,19,55,20,56,21,57,22,57,23,58,24,58,25,59,26,59,27,59,28,59,29,58,30,58,31,58,32,57,33,57,34,57,35,57,36,57,37,57,38,57,39,57,40,57,41,57,42,57,43,57,44,57,45,57,46,57,47,57,48,57,49,57,50,57,51,57,52,57,53,57,54,57,55,57,56,57,57,57,58,57,59,57,60,56,61,56,62,55,63,55,64,55,65,55,66,55,67,55,68,55,69,54,70,53,71,54,72,54,73,54,74,54,75,54,76,54,77,54,78,53,79,53,80,53,81,55,82,55,83,55,84,55,85,55,86,55,87,55,88,55,89,55,90,53,91,53,92,52,93,53,94,53,95,52,96,52,97,52,98,47,99,45,100,44,101,43,102,42,103,41,104,40,105,40,106,39,107,38,108,38,109,37,110,37,111,36,112,36,113,35,114,35,115,35,116,34,117,34,118,33,119,33,120,33,121,33,122,32,123,32,124,32,125,31,126,31,127,31,128,31,129,31,130,31,131,30,132,30,133,30,134,30,135,30,136,30,136,30,135,30,134,30,133,29,132,29,131,29,130,29,129,28,128,28,127,28,126,28,125,28,124,27,123,27,122,26,121,26,120,26,119,26,118,25,117,25,116,24,115,24,114,24,113,23,112,22,111,22,110,21,109,21,108,20,107,19,106,19,105,18,104,17,103,17,102,16,101,15,100,13,99,9,98,9,97,9,96,9,95,9,94,9,93,9,92,8,91,8,90,6,89,5,88,4,87,6,86,6,85,6,84,6,83,6,82,6,81,6,80,6,79,6,78,6,77,6,76,6,75,6,74,6,73,6,72,5,71,5,70,4,69,4,68,4,67,4,66,4,65,4,64,4,63,4,62,3,61,3,60,3,59,3,58,3,57,3,56,3,55,3,54,3,53,3,52,3,51,3,50,3,49,3,48,3,47,3,46,3,45,3,44,3,43,3,42,3,41,2,40,2,39,2,38,2,37,2,36,2,35,2,34,2,33,2,32,2,31,2,30,1,29,1,28,1,27,1,26,2,25,2,24,2,23,3,22,3,21,4,20,4,19,5,18,7,17,7,16,9,15,7,14,7,13,7,12,8,11,7,10,3,9,4,8,2,7,2,6,2,5,4,4,12,3,14,2,16,1,18,0,33,0],
          type: 'poly'
        };

        new google.maps.Marker({
            position: new google.maps.LatLng(41.394638, 2.148994),
            map: gmap,
            icon: image,
            shadow: shadow,
            shape: shape,
        });
    }
});
